<!DOCTYPE html>
<meta charset="utf-8">
<style>
path {
  stroke: white;
  stroke-width: 0.25px;
  fill: grey;
}
</style>
<body>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="https://unpkg.com/topojson@3"></script>
<script>
const width = 960
const height = 500

d3.csv('earthquake.csv').then(handleData)

function handleData(data) {

	const projection = d3.geoMercator()
		.center([0, 5])
		.scale(150)
		.rotate([-180, 0])

	const svg = d3.select("body")
		.append("svg")
		.attr("width", width)
		.attr("height", height)

	const path = d3.geoPath()
		.projection(projection)

	const g = svg.append("g")

	// // load and display the World
	d3.json("world-110m2.json") // world-110m2.json
		.then(topology => {

			console.log(topology)

			g.selectAll("path")
				.data(topojson.feature(topology, topology.objects.countries).features)
				.enter()
				.append("path")
				.attr("d", path);
		});

	d3.select('svg')
		.selectAll('circle')
		.data(data)
		.enter()
		.append('circle')
		.attr('cx', d => projection([d.Longitude, d.Latitude])[0])
		.attr('cy', d => projection([d.Longitude, d.Latitude])[1])
		.attr('r', d => d.Depth / 50)
		.style('fill', 'rgb(217,91,67)')
		.style('opacity', 0.1)	
}

</script>
</body>
</html>
